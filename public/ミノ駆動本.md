
第2版

- ドメインモデルの完全性
  - データやロジックに欠損や不整合がなく、正確な状態を維持できること

- 貧血ドメインモデル
  - わざわざほかのクラスに初期化してもらったり、データをチェックしてもらったり、ほかのクラスのメソッドを呼び出さないと機能しないようなデータクラス


- 省略せずに意味が伝わる名前を付ける
- 変数は使い回さない、引数の値は変更しない
- 目的ごとにメソッド化
- 関係し合うデータとロジックをクラスにまとめる

- カプセル化
  - データとそのデータを操作するロジックをひとつにまとめる

- 関心の分離
- 多態性による機能の取り換え

- クラス単体で動くように設計する

- 値の渡し間違いは型で防止
- 整数は int , 文字列は string にしがち
- Money 型みたいな独自の型に使う

- システムの仕様に必要なメソッドのみを定義


## 3.4 プログラム構造の問題解決に役立つ設計パターン

- 完全コンストラクタ
- 値オブジェクト
- 「値オブジェクト + 完全コンストラクタ」は、カプセル化の最も基本形を体現している構造のひとつ

# 第4章　不変の活用 安定動作を保障する

- ローカル変数も引数も不変（再代入不可）にする
  - 同じインスタンスの使い回しをやめる
- 大量データの高速処理や画像処理、リソース制約の厳しい組込みソフトウェアなどで可変が必要なことがあります
- パフォーマンス以外で可変にして良いのは、スコープが局所的なケースです。ループカウンタなど、ループ処理のスコープでしか使われないことが確実なローカル変数ならば、可変にしてよいと考えます。

### 4.2.3 副作用のデメリット

- 副作用とは、関数が引数を受け取り、戻り値を返す以外に外部の状態を変更すること
  - インスタンス変数の変更
  - グローバル変数の変更
  - 参照型引数の変更
  - ファイルの読み書きなどの I/O 操作

- コード外とのやりとりには注意が必要
